<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Monolithic · GMT</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../usage/">GMT</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../usage/">Introduction</a></li><li><a class="tocitem" href="../quick_learn/">Quick Learn</a></li><li><a class="tocitem" href="../examples/">Some examples</a></li><li><a class="tocitem" href="../rectangles/">Draw rectangles examples</a></li><li><a class="tocitem" href="../frames/">Draw frames examples</a></li><li><a class="tocitem" href="../proj_examples/">Map projections</a></li><li><span class="tocitem">Gallery</span><ul><li><a class="tocitem" href="../gallery/isc/">Advanced ISC example</a></li><li><a class="tocitem" href="../gallery/tables/">AGU</a></li><li><a class="tocitem" href="../gallery/bars/bars/">Bar plots</a></li><li><a class="tocitem" href="../gallery/color_lines/color_lines/">Color lines</a></li><li><input class="collapse-toggle" id="menuitem-7-5" type="checkbox"/><label class="tocitem" for="menuitem-7-5"><span class="docs-label">Choropleth maps</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../gallery/choropleths/choropleth_DCW/">Coutries (DCW)</a></li><li><a class="tocitem" href="../gallery/choropleths/choropleth_cv19/">Covid in Portugal</a></li></ul></li><li><a class="tocitem" href="../gallery/contourf/contourf/">Contourf</a></li><li><a class="tocitem" href="../gallery/GADM/gadm/">GADM Countries</a></li><li><a class="tocitem" href="../gallery/buffergeo/buffer/">Geodesic buffers</a></li><li><a class="tocitem" href="../gallery/historic/">Historical collection</a></li><li><a class="tocitem" href="../gallery/Landsat8/histogram_stretch/">Landsat 8</a></li><li><a class="tocitem" href="../gallery/mapprojs/">Map projections</a></li><li><a class="tocitem" href="../gallery/plot_funs/plot_funs/">Plotting functions</a></li><li><a class="tocitem" href="../gallery/plotyy/plotyy/">Plotyy</a></li><li><a class="tocitem" href="../gallery/spirals/spirals/">Spirals</a></li><li><a class="tocitem" href="../gallery/ternary/ternary/">Ternary</a></li><li><a class="tocitem" href="../gallery/UTM_Geog_annot/ex28/">UTM and Geog axes</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Monolithic</a><ul class="internal"><li><a class="tocitem" href="#How-input-and-output-are-assigned"><span>How input and output are assigned</span></a></li></ul></li><li><a class="tocitem" href="../modules/">By Modules</a></li><li><a class="tocitem" href="../common_opts/">Common options</a></li><li><input class="collapse-toggle" id="menuitem-73-4" type="checkbox"/><label class="tocitem" for="menuitem-73-4"><span class="docs-label">General features</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../arrows_control/">Vector Attributes</a></li><li><a class="tocitem" href="../color/">Setting color</a></li><li><a class="tocitem" href="../decorated/">Line decorations</a></li><li><a class="tocitem" href="../symbols/">Symbols</a></li><li><a class="tocitem" href="../themes/">Themes</a></li></ul></li></ul></li><li><span class="tocitem">Modules manuals</span><ul><li><a class="tocitem" href="../arrows/">arrows</a></li><li><a class="tocitem" href="../bar/">bar</a></li><li><a class="tocitem" href="../bar3/">bar3</a></li><li><a class="tocitem" href="../coast/">coast</a></li><li><a class="tocitem" href="../colorbar/">colorbar</a></li><li><a class="tocitem" href="../contourf/">contourf</a></li><li><a class="tocitem" href="../grdcontour/">grdcontour</a></li><li><a class="tocitem" href="../grdimage/">grdimage</a></li><li><a class="tocitem" href="../grdgradient/">grdgradient</a></li><li><a class="tocitem" href="../grdview/">grdview</a></li><li><a class="tocitem" href="../histogram/">histogram</a></li><li><a class="tocitem" href="../lines/">lines</a></li><li><a class="tocitem" href="../makecpt/">makecpt</a></li><li><a class="tocitem" href="../movie/">movie</a></li><li><a class="tocitem" href="../plot/">plot</a></li><li><a class="tocitem" href="../scatter/">scatter</a></li><li><a class="tocitem" href="../scatter3/">scatter3</a></li><li><a class="tocitem" href="../solar/">solar</a></li><li><a class="tocitem" href="../subplot/">subplot</a></li><li><a class="tocitem" href="../text/">text</a></li></ul></li><li><a class="tocitem" href="../types/">The GMT types</a></li><li><a class="tocitem" href="../">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Monolithic</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Monolithic</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenericMappingTools/GMT.jl/blob/master/docs/src/monolitic.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Monolithic"><a class="docs-heading-anchor" href="#Monolithic">Monolithic</a><a id="Monolithic-1"></a><a class="docs-heading-anchor-permalink" href="#Monolithic" title="Permalink"></a></h1><p>In this mode all <strong>GMT</strong> options are put in a single text string that is passed, plus the data itself when it applies, to the <span>$gmt()$</span> command. This function is invoked with the syntax (where the brackets mean optional parameters):</p><pre><code class="nohighlight hljs">[output objects] = gmt(&quot;modulename optionstring&quot; [, input objects]);</code></pre><p>where <em>modulename</em> is a string with the name of a GMT module (e.g., <em>surface</em>, <em>grdimage</em>, <em>psmeca</em>, or even a custom extension), while the <em>optionstring</em> is a text string with the options passed to this module. If the module requires data inputs from the Julia environment, then these are provided as optional comma-separated arguments following the option string. Should the module produce output(s) then these are captured by assigning the result of gmt to one or more comma-separated variables. Some modules do not require an option string or input objects, or neither, and some modules do not produce any output objects.</p><p>In addition, it can also use two i/o modules that are irrelevant on the command line: the <em>read</em> and <em>write</em> modules. These modules allow to import and export any of the GMT data types to and from external files. For instance, to import a grid from the file <em>relief.nc</em> we run</p><pre><code class="nohighlight hljs">G = gmt(&quot;read -Tg relief.nc&quot;);</code></pre><p>We use the <strong>-T</strong> option to specify grid (g), image (i), PostScript (p), color palette (c), dataset (d) or textset (t). Results kept in Julia can be written out at any time via the write module, e.g., to save the grid Z to a file we use</p><pre><code class="nohighlight hljs">gmt(&quot;write model_surface.nc&quot;, Z);</code></pre><p>Because GMT data tables often contain headers followed by many segments, each with their individual segment headers, it is best to read such data using the read module since native Julia import functions risk to choke on such headers.</p><h2 id="How-input-and-output-are-assigned"><a class="docs-heading-anchor" href="#How-input-and-output-are-assigned">How input and output are assigned</a><a id="How-input-and-output-are-assigned-1"></a><a class="docs-heading-anchor-permalink" href="#How-input-and-output-are-assigned" title="Permalink"></a></h2><p>Each GMT module knows what its primary input and output objects should be. Some modules only produce output (e.g., <em>psbasemap</em> makes a basemap plot with axes annotations) while other modules only expect input and do not return any items back (e.g., the write module writes the data object it is given to a file). Typically, (i.e., on the command line) users must carefully specify the input filenames and sometimes give these via a module option. Because users of this wrapper will want to provide input from data already in memory and likewise wish to assign results to variables, the syntax between the command line and Julia commands necessarily must differ. For example, here is a basic GMT command that reads the time-series <em>raw_data.txt</em> and filters it using a 15-unit full-width (6 sigma) median filter:</p><pre><code class="nohighlight hljs">gmt filter1d raw_data.txt –Fm15 &gt; filtered_data.txt</code></pre><p>Here, the input file is given on the command line but input could instead come via the shell’s standard input stream via piping. Most GMT modules that write tables will write these to the shell’s output stream and users will typically redirect these streams to a file (as in our example) or pipe the output into another process. When using GMT.jl there are no shell redirections available. Instead, we wish to pass data to and from the Julia environment. If we assume that the content in <em>raw_data.txt</em> exists in a array named <em>raw_data</em> and we wish to receive the filtered result as a segment array named filtered, we would run the command</p><pre><code class="nohighlight hljs">filtered = gmt(&quot;filter1d -Fm15&quot;, raw_data);</code></pre><p>This illustrates the main difference between command line and Julia usage: Instead of redirecting output to a file we return it to an internal object (here, a segment array) using standard Julia assignments of output.</p><p>For data types where piping and redirection of output streams are inappropriate (including most grid file formats) the GMT modules use option flags to specify where grids should be written. Consider a GMT command that reads (x, y, z) triplets from the file depths.txt and produces an equidistant grid using a Green’s function-based spline-in-tension gridding routine:</p><pre><code class="nohighlight hljs">gmt greenspline depths.txt -R-50/300/200/600 -I5 -D1 -St0.3 -Gbathy.nc</code></pre><p>Here, the result of gridding Cartesian data (-D1) within the specified region (an equidistant lattice from x from -50 to 300 and y from 200 to 600, both with increments of 5) using moderately tensioned cubic splines (-St0.3) is written to the netCDF file <em>bathy.nc</em>. When using GMT.jl we do not want to write a file but wish to receive the resulting grid as a new Julia variable. Again, assuming we already loaded in the input data, the equivalent command is</p><pre><code class="nohighlight hljs">bathy = gmt(&quot;greenspline -R-50/300/200/600 -I5 -D1 -St0.3&quot;, depths);</code></pre><p>Note that <em>-G</em> is no longer specified among the options. In this case the wrapper uses the GMT API to determine that the primary output of greenspline is a grid and that this is specified via the <em>-G</em> option. If no such option is given (or given without specifying a filename), then we instead return the grid via memory, provided a left-side assignment is specified. GMT only allows this behavior when called via an external API such as this wrapper: Not specifying the <em>-G</em> option on the command line would result in an error message. However, it is perfectly fine to specify the option <em>-Gbathy.nc</em> in Julia – it simply means you are saving the result to a file instead of returning it to Julia.</p><p>Some GMT modules can produce more than one output (here called a secondary outputs) or can read more than one input type (i.e., secondary inputs). Secondary inputs or outputs are always specified by explicit module options on the command line, e.g., <em>-Fpolygon.txt</em>. In these cases, the <span>$gmt()$</span> enforces the following rules: When a secondary input is passed as an object then we must specify the corresponding option flag but provide no file argument (e.g., just <em>-F</em> in the above case). Likewise, for secondary output we supply the option flag and add additional objects to the left-hand side of the assignment. All secondary items, whether input or output, must appear after all primary items, and if more than one secondary item is given then their order must match the order of the corresponding options in option string.</p><p>Here are two examples contrasting the GMT command line versus <span>$gmt()$</span> usage. In the first example we wish to determine all the data points in the file <em>all_points.txt</em> that happen to be located inside the polygon specified in the file <em>polygon.txt</em>. On the command line this would be achieved by</p><pre><code class="nohighlight hljs">gmt select points.txt -Fpolygon.txt &gt; points_inside.txt</code></pre><p>while in Julia (assuming the points and polygon already reside in memory) we would run</p><pre><code class="nohighlight hljs">inside = gmt(&quot;gmtselect -F&quot;, points, polygon);</code></pre><p>Here, the points object must be listed first since it is the primary data expected.</p><p>Our second example considers the joining of line segments into closed polygons. We wish to create one file with all closed polygons and another file with any remaining disjointed lines. Not expecting perfection, we allow segment end-points closer than 0.1 units to be connected. On the command line we would run</p><pre><code class="nohighlight hljs">gmt connect all_segments.txt -Cclosed.txt -T0.1 &gt; rest.txt</code></pre><p>where <em>all_segments.txt</em> are the input lines, closed.txt is the file that will hold closed polygons made from the relevant lines, while any remaining lines (i.e., open polygons) are written to standard output and redirected to the file rest.txt. Equivalent Julia usage would be</p><pre><code class="nohighlight hljs">all = gmt(&quot;read -Td all_segments.txt&quot;);
rest, closed = gmt(&quot;gmtconnect -T0.1 -C&quot;, all);</code></pre><p>Note the primary output (here rest) must be listed before any secondary outputs (here closed) in the left-hand side of the assignment.</p><p>So far, the <span>$gmt()$</span> function has been able to understand where inputs and outputs objects should be inserted, provided we follow the rules introduced above. However, there are two situations where more information must be provided. The first situation involves two GMT modules that allow complete freedom in how arguments are passed. These are gmtmath and grdmath, our reverse polish notation calculators for tables and grids, respectively. While the command-line versions require placement of arguments in the right order among the desired operators, the <span>$gmt()$</span> necessarily expects all inputs at the end of the function call. Hence we must assist the command by placing markers where the input arguments should be used; the marker we chose is the question mark (?). We will demonstrate this need using an example of grdmath. Imagine that we have created two separate grids: <em>kei.nc</em> contains an evaluation of the radial <em>z = bei(r)</em> Kelvin-Bessel function while <em>cos.nc</em> contains a cylindrical undulation in the x-direction. We create these two grids on the command line by</p><pre><code class="nohighlight hljs">gmt grdmath -R-4/4/-4/4 -I256+ X Y HYPOT KEI = kei.nc
gmt grdmath -R -I256+ X COS = cos.nc</code></pre><p>Later, we decide we need pi plus the product of these two grids, so we compute</p><pre><code class="nohighlight hljs">gmt grdmath kei.nc cos.nc MUL PI ADD = answer.nc</code></pre><p>In Julia the first two commands are straightforward:</p><pre><code class="nohighlight hljs">kei = gmt(&quot;grdmath -R-4/4/-4/4 -I256+ X Y HYPOT KEI&quot;);
C   = gmt(&quot;grdmath -R -I256+ X COS&quot;);</code></pre><p>but when time comes to perform the final calculation we cannot simply do</p><pre><code class="nohighlight hljs">answer = gmt(&quot;grdmath MUL PI ADD&quot;, kei, C);</code></pre><p>since grdmath would not know where kei and C should be put in the context of the operators MUL and ADD. We could probably teach grdmath to discover the only possible solution since the MUL operator requires two operands but none are listed on the command line. The logical choice then is to take kei and C as operands. However, in the general case it may not be possible to determine a unique layout, but more importantly it is simply too confusing to separate all operators from their operands (other than constants) as we would lose track of the mathematical operation we are performing. For this reason, we will assist the module by inserting question marks where we wish the module to use the next unused input object in the list. Hence, the valid command becomes</p><pre><code class="nohighlight hljs">answer = gmt(&quot;grdmath ? ? MUL PI ADD&quot;, kei, C);</code></pre><p>Of course, all these calculations could have been done at once with no input objects but often we reuse results in different contexts and then the markers are required. The second situation arises if you wish to use a grid as argument to the <em>-R</em> option (i.e., to set the current region to that of the grid). On the command line this may look like</p><pre><code class="nohighlight hljs">gmt pscoast -Reurope.nc -JM5i –P -Baf -Gred &gt; map.ps</code></pre><p>However, in Julia we cannot simply supply <em>-R</em> with no argument since that is already an established shorthand for selecting the previously specified region. The solution is to supply <em>–R?</em>. Assuming our grid is called europe then the Julia command would become</p><pre><code class="nohighlight hljs">map = gmt(&quot;pscoast -R? -JM5i -P -Baf -Gred&quot;, europe);</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../grdhisteq/">« grdhisteq</a><a class="docs-footer-nextpage" href="../modules/">By Modules »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.7 on <span class="colophon-date" title="Tuesday 5 October 2021 21:33">Tuesday 5 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Landsat 8 · GMT</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../usage/">GMT</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../usage/">Introduction</a></li><li><a class="tocitem" href="../../../quick_learn/">Quick Learn</a></li><li><a class="tocitem" href="../../../examples/">Some examples</a></li><li><a class="tocitem" href="../../../rectangles/">Draw rectangles examples</a></li><li><a class="tocitem" href="../../../frames/">Draw frames examples</a></li><li><a class="tocitem" href="../../../proj_examples/">Map projections</a></li><li><span class="tocitem">Gallery</span><ul><li><a class="tocitem" href="../../isc/">Advanced ISC example</a></li><li><a class="tocitem" href="../../tables/">AGU</a></li><li><a class="tocitem" href="../../bars/bars/">Bar plots</a></li><li><a class="tocitem" href="../../color_lines/color_lines/">Color lines</a></li><li><input class="collapse-toggle" id="menuitem-7-5" type="checkbox"/><label class="tocitem" for="menuitem-7-5"><span class="docs-label">Choropleth maps</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../choropleths/choropleth_DCW/">Coutries (DCW)</a></li><li><a class="tocitem" href="../../choropleths/choropleth_cv19/">Covid in Portugal</a></li></ul></li><li><a class="tocitem" href="../../contourf/contourf/">Contourf</a></li><li><a class="tocitem" href="../../GADM/gadm/">GADM Countries</a></li><li><a class="tocitem" href="../../buffergeo/buffer/">Geodesic buffers</a></li><li><a class="tocitem" href="../../historic/">Historical collection</a></li><li class="is-active"><a class="tocitem" href>Landsat 8</a></li><li><a class="tocitem" href="../../mapprojs/">Map projections</a></li><li><a class="tocitem" href="../../plot_funs/plot_funs/">Plotting functions</a></li><li><a class="tocitem" href="../../plotyy/plotyy/">Plotyy</a></li><li><a class="tocitem" href="../../spirals/spirals/">Spirals</a></li><li><a class="tocitem" href="../../ternary/ternary/">Ternary</a></li><li><a class="tocitem" href="../../UTM_Geog_annot/ex28/">UTM and Geog axes</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../../monolitic/">Monolithic</a></li><li><a class="tocitem" href="../../../modules/">By Modules</a></li><li><a class="tocitem" href="../../../common_opts/">Common options</a></li><li><input class="collapse-toggle" id="menuitem-73-4" type="checkbox"/><label class="tocitem" for="menuitem-73-4"><span class="docs-label">General features</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../arrows_control/">Vector Attributes</a></li><li><a class="tocitem" href="../../../color/">Setting color</a></li><li><a class="tocitem" href="../../../decorated/">Line decorations</a></li><li><a class="tocitem" href="../../../symbols/">Symbols</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li></ul></li><li><span class="tocitem">Modules manuals</span><ul><li><a class="tocitem" href="../../../arrows/">arrows</a></li><li><a class="tocitem" href="../../../bar/">bar</a></li><li><a class="tocitem" href="../../../bar3/">bar3</a></li><li><a class="tocitem" href="../../../coast/">coast</a></li><li><a class="tocitem" href="../../../colorbar/">colorbar</a></li><li><a class="tocitem" href="../../../contourf/">contourf</a></li><li><a class="tocitem" href="../../../grdcontour/">grdcontour</a></li><li><a class="tocitem" href="../../../grdimage/">grdimage</a></li><li><a class="tocitem" href="../../../grdgradient/">grdgradient</a></li><li><a class="tocitem" href="../../../grdview/">grdview</a></li><li><a class="tocitem" href="../../../histogram/">histogram</a></li><li><a class="tocitem" href="../../../lines/">lines</a></li><li><a class="tocitem" href="../../../makecpt/">makecpt</a></li><li><a class="tocitem" href="../../../movie/">movie</a></li><li><a class="tocitem" href="../../../plot/">plot</a></li><li><a class="tocitem" href="../../../scatter/">scatter</a></li><li><a class="tocitem" href="../../../scatter3/">scatter3</a></li><li><a class="tocitem" href="../../../solar/">solar</a></li><li><a class="tocitem" href="../../../subplot/">subplot</a></li><li><a class="tocitem" href="../../../text/">text</a></li></ul></li><li><a class="tocitem" href="../../../types/">The GMT types</a></li><li><a class="tocitem" href="../../../">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Gallery</a></li><li class="is-active"><a href>Landsat 8</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Landsat 8</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenericMappingTools/GMT.jl/blob/master/docs/src/gallery/Landsat8/histogram_stretch.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h3 id="Plot-Landsat-8-images"><a class="docs-heading-anchor" href="#Plot-Landsat-8-images">Plot Landsat 8 images</a><a id="Plot-Landsat-8-images-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Landsat-8-images" title="Permalink"></a></h3><p>The data used in this example is the band 4 (red channel) of a Landsat 8 scene. Those are relatively big images (~116 MB) so we will download it first and take that into account when the results of the commands bellow do not show instantly.</p><pre><code class="language-julia hljs">Ir = gmtread(&quot;/vsicurl/http://landsat-pds.s3.amazonaws.com/c1/L8/037/034/LC08_L1TP_037034_20160712_20170221_01_T1/LC08_L1TP_037034_20160712_20170221_01_T1_B4.TIF&quot;);</code></pre><p>and have a look at what we got</p><pre><code class="language-julia hljs">imshow(Ir)</code></pre><img src="../b4raw.png" width="700" class="center"/><p><em>Ah, nice ... but it&#39;s so dark that we can&#39;t really see much!</em></p><p>Well that is true and has one explanation. Modern satellite data is acquired with sensors of 12 bits or more but the data is stored in variables with 16 bits. This means that many of those data bits will not be used. But on screens we are limited to 8 bits per channel so we must scale the full 16 bits range [0 65535] to the [0 255] interval and in this process we tend to have much more dark pixels.</p><p>To see this better, let&#39;s look at the image&#39;s histogram.</p><pre><code class="language-julia hljs">histogram(Ir, auto=true, bin=20, show=true)</code></pre><img src="../b4hist.png" width="500" class="center"/><p>We have used here the option <strong>auto</strong>=<em>true</em> that will try to guess where the data in histogram plot starts and ~ ends. It did behave well and we will use those numbers to do an operation that is called <em>histogram stretch</em> that consists in picking only part of the histogram and stretch it to [0 255]. Note that in fact we have data to the 40000 DN (Digital Number) but they are very few and at the end we must choose a balance to show <em>almost all</em> DNs and not making the image too dark.</p><pre><code class="language-julia hljs">imshow(I, stretch=[6000 23800])</code></pre><img src="../b4stretched.png" width="700" class="center"/><p>Now that we feel confident with the auto-stretching algorithm we can create a true color image. True color images are obtained by inserting the Landsat8 band 4 in the Red channel, band 3 in Green and band 2 in Blue. Looking at the file name that we downloaded it&#39;s easy to guess that bands &quot;...T1<em>B3.TIF&quot; and &quot;...T1</em>B2.TIF&quot; contain the green and blue channels that we need. So download them (takes a little time)</p><pre><code class="language-julia hljs">Ig = gmtread(&quot;/vsicurl/http://landsat-pds.s3.amazonaws.com/c1/L8/037/034/LC08_L1TP_037034_20160712_20170221_01_T1/LC08_L1TP_037034_20160712_20170221_01_T1_B3.TIF&quot;);

Ib = gmtread(&quot;/vsicurl/http://landsat-pds.s3.amazonaws.com/c1/L8/037/034/LC08_L1TP_037034_20160712_20170221_01_T1/LC08_L1TP_037034_20160712_20170221_01_T1_B2.TIF&quot;);</code></pre><p>and compose a true color image with the function <code>truecolor()</code> from the <a href="https://github.com/GenericMappingTools/RemoteS.jl">RemoteS</a> package that will do the auto-stretching automatically for us</p><pre><code class="language-julia hljs">using RemoteS
Irgb = truecolor(Ir, Ig, Ib);</code></pre><img src="../truecolor.png" width="700" class="center"/><hr/><p><em>Download a <a href="../histogram_stretch.jl">Pluto Notebook here</a></em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../historic/">« Historical collection</a><a class="docs-footer-nextpage" href="../../mapprojs/">Map projections »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Friday 5 November 2021 01:08">Friday 5 November 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
